(function(){var r,e={},n=-1,t={}.toString;function o(r,e){var n,t=r.length;for(n=0;n<t;n++)if(r[n][1]===e)return!0;return!1}function i(r){var e,n=r.length,t=[];for(e=0;e<n;e++)o(t,r[e][1])||t.push(r[e]);return t}function u(r){return"[object Array]"===t.call(r)}function c(r,e,n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=_!?()*",o=[],i=r;for(e=e||t.length,n=n||0;i>=e;)o.push(t.charCodeAt(i%e+n)),i=Math.floor(i/e-1);return o.push(t.charCodeAt(i+n)),o.reverse()}function f(r){return String.fromCharCode.apply(String,r)}function a(r,e){var a,p,s,l,g,h;for(e=function r(e,a){var p,s,l,g;for(s in e)e.hasOwnProperty(s)&&(l=e[s],g=l,("[object Object]"===t.call(g)||u(l))&&(a=a.concat(i(r(l,a)))),isNaN(Number(s))&&(o(a,s)||((p=[]).push(f(c(n+=1)),s),a.push(p))));return a}(r,e),a=function(r){var e,n,t={},o=r.length;for(e=0;e<o;e++)t[(n=r[e])[0]]=n[1];return t}(e=i(e)),s=JSON.stringify(r),l=e.length,g=0;g<l;g++)p=e[g],s=s.replace(new RegExp(('"'+p[1]+'"').replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"g"),'"'+p[0]+'"');return(h=JSON.parse(s))._=a,h}r="object"==typeof exports&&"object"==typeof module&&"object"==typeof module.exports&&"function"==typeof require,e.compress=function(r,t){t||(n=-1);var o,i=t||[];return u(r)?(!function(r,n){var t,o;for(t=0,o=r.length;t<o;t++)r[t]=e.compress(r[t],n)}(r,i),o=r):o=a(r,i),o},e.pack=function(r,n){var t=JSON.stringify(n?e.compress(r):r);return Base64.encode(String.fromCharCode.apply(String,gzip.zip(t,{level:9})))},e.decompress=function(r){var n,t=JSON.parse(JSON.stringify(r));return u(t)?function(r){var n,t;for(n=0,t=r.length;n<t;n++)r[n]=e.decompress(r[n])}(t):n=function(r){var e,n,t;for(t in e=JSON.parse(JSON.stringify(r._)),delete r._,n=JSON.stringify(r),e)e.hasOwnProperty(t)&&(n=n.replace(new RegExp('"'+t+'"',"g"),'"'+e[t]+'"'));return n}(t),n?JSON.parse(n):t},e.unpack=function(r,n){var t=function(r){for(var e=0,n=r.length,t=[];e<n;e++)t.push(r.charCodeAt(e));return t}(Base64.decode(r)),o=String.fromCharCode.apply(String,gzip.unzip(t,{level:9})),i=JSON.parse(o);return n?e.decompress(i):i},this.JSONC=e,r?module.exports=e:"undefined"!=typeof define&&define("jsoncomp",[],(function(){return e}))}).call(this);